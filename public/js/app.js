"use strict";function callToTMDB(e){var t=new XMLHttpRequest;t.onload=function(){if(200===t.status)return JSON.parse(t.response);console.log("There was an error "+t.status)},t.open("GET",e+"/71c13c22fd835d4e19e38ff24d5ab4fc"),t.send()}function clearFromDOM(e){if(e.firstChild)for(;e.firstChild;)e.removeChild(e.firstChild)}function insertResults(e){var t=querySel(".actors-result-wrap"),r=querySel(".result-instructions");clearFromDOM(t),0===e.length&&(t.textContent="Sorry, nothing found."),r.textContent="Click the actors'/actress' photo for their complete works.",e.forEach(function(e){var r=document.createElement("a"),o=document.createElement("img");e.profile_path&&(o.src=""+(posterBaseURL+e.profile_path)),o.classList.add("actor-poster"),r.classList.add("actor-result"),r.setAttribute("href","#"),r.setAttribute("data-actor-id",e.id),r.appendChild(o),t.appendChild(r)})}function getActorInfo(e){var t=new XMLHttpRequest,r=querySel(".actor-name"),o=(querySel(".actor-meta"),querySel(".actor-bio"));t.onload=function(){if(200===t.status){var e=JSON.parse(t.response);r.textContent=e.name+", "+e.birthday+", "+e.place_of_birth,o.textContent=""+e.biography,console.log(e)}else console.log("There was an error "+t.status)},t.open("GET","https://api.themoviedb.org/3/person/"+e+"?api_key=71c13c22fd835d4e19e38ff24d5ab4fc&language=en-US"),t.send()}function getActorCredits(e){var t=new XMLHttpRequest,r=querySel(".credits-wrap"),o=querySel(".credit-meta"),n=querySel(".credit-about"),a=querySel(".credit-character"),s=querySel(".credit-overview"),c=querySel(".episode-count"),i=querySel(".type-badge"),l=querySel(".credit-instructions");t.onload=function(){if(200===t.status){var e=JSON.parse(t.response);clearFromDOM(r),o.textContent="Has been in "+e.cast.length+" movies and / or TV shows.",l.textContent="Click a poster to get more info about their role.",e.cast.forEach(function(e){var t=document.createElement("a"),o=document.createElement("img");e.poster_path&&(o.src="https://image.tmdb.org/t/p/w185/"+e.poster_path),o.classList.add("credit-poster"),t.classList.add("credit"),t.setAttribute("href","#"),t.setAttribute("data-credit-id",e.id),t.appendChild(o),r.appendChild(t)});document.querySelectorAll(".credit").forEach(function(t){t.addEventListener("click",function(t){var r=this.getAttribute("data-credit-id");t.preventDefault(),e.cast.forEach(function(e){String(e.id)===r&&(e.title?n.textContent=""+e.title:n.textContent=""+e.name,a.textContent=""+e.character,"tv"==e.media_type?(i.textContent="TV SHOW",e.episode_count&&(c.textContent="In "+e.episode_count+" episodes.")):(i.textContent="MOVIE",c.textContent=""),s.textContent=""+e.overview)}),console.log("Credit ID: "+r)})}),console.log(e)}else console.log("There was an error "+t.status)},t.open("GET","https://api.themoviedb.org/3/person/"+e+"/combined_credits?api_key=71c13c22fd835d4e19e38ff24d5ab4fc&language=en-US"),t.send()}var querySel=function(e){return document.querySelector(e)},btn=querySel(".btn"),search=querySel(".search-form"),searchEl=querySel(".search"),appWrap=querySel(".app-wrap"),welcomeMsg=querySel(".welcome-msg"),posterBaseURL="https://image.tmdb.org/t/p/original/";search.addEventListener("submit",function(e){e.preventDefault();querySel(".actor-poster"),querySel(".known-for"),document.querySelectorAll(".actor-result");var t=searchEl.value;querySel(".results-info").textContent="Results for "+t,console.log(t),searchEl.value="";var r=new XMLHttpRequest;r.onload=function(){if(200===r.status){var e=JSON.parse(r.response);appWrap.style.display="block",welcomeMsg.style.display="none",insertResults(e.results);document.querySelectorAll(".actor-result").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),getActorInfo(e.getAttribute("data-actor-id")),getActorCredits(e.getAttribute("data-actor-id"))})}),console.log(e.results)}},r.onerror=function(e){console.log("There was an error: "+r.error)},r.open("GET","https://api.themoviedb.org/3/search/person?api_key=71c13c22fd835d4e19e38ff24d5ab4fc&language=en-US&query="+t),r.send()});